# Frija &middot; [![License](https://img.shields.io/github/license/robshape/frija.svg)](./LICENSE)
The Swedish general election and Riksdag on the Ethereum blockchain.

## Development
The following section will help you set up the development environment.

### Prerequisites
Install [Homebrew](https://brew.sh/) and run `brew install node`. Clone this repository. Create a file with the name `.env` inside the root directory. Add the following variables inside the file:
```
GRAPHQL_ENDPOINT=https://localhost:3000/graphql
PORT=3000
SSL_CERT=./server.crt
SSL_KEY=./server.key
TOKEN_EXPIRES_IN=10m
TOKEN_SECRET=c3e2a70e-ba85-4120-ba4d-1adc9c3d64c9
```

|VARIABLE|VALUE|
|--------|-----|
|GRAPHQL_ENDPOINT|URL to the server /graphql endpoint used by the client.|
|PORT|Port that the server should listen on.|
|SSL_CERT|SSL certificate used for HTTPS by the server (generated by `npm install`).|
|SSL_KEY|SSL key used for HTTPS by the server (generated by `npm install`).|
|TOKEN_EXPIRES_IN|Expire time for server authentication tokens.|
|TOKEN_SECRET|Secret used for creating authentication tokens by the server.|

### Install Dependencies
Run `npm install` inside the root directory.

### Start Project
Run `npm run run:ethereum` inside the root directory. This will start the Truffle development blockchain. Open another shell and run the following commands:
```shell
npm run build:ethereum
npm run deploy:ethereum
npm start
```

Then complete the following steps:
1. Visit [https://localhost:3000/health/](https://localhost:3000/health/) using Google Chrome.
2. Accept the self-signed SSL certificate used for HTTPS by the server (generated by `npm install`).
3. Visit [http://localhost:8080/](http://localhost:8080/) using Google Chrome.
4. Use a [personal identity number](./docs/CREDENTIALS.md) to log in.

Visit [https://localhost:3000/graphql](https://localhost:3000/graphql) to open GraphQL Playground.

## License
[GNU General Public License v3.0](./LICENSE). Copyright (C) 2018 Frija contributors.
